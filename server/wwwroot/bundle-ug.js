(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Collision_1=require("./Collision");var Colours_1=require("./Colours");var DataStructures_1=require("./DataStructures");var GameValues_1=require("./GameValues");var ActorState;(function(ActorState){ActorState[ActorState["descending"]=0]="descending";ActorState[ActorState["ascending"]=1]="ascending";ActorState[ActorState["jumping"]=2]="jumping";ActorState[ActorState["landing"]=3]="landing";ActorState[ActorState["resting"]=4]="resting";ActorState[ActorState["waiting"]=5]="waiting"})(ActorState=exports.ActorState||(exports.ActorState={}));var Actor=function(){function Actor(state,xMovementRange,sprite){this.stunTicks=0;this.state=state;this.xMin=xMovementRange.min;this.xMax=xMovementRange.max;this.xDirection=DataStructures_1.Direction.Stopped;this.yDirection=DataStructures_1.Direction.Stopped;this.sprite=sprite;this.collisionBuffer=5;this.x=(this.xMax-this.xMin)/2+this.xMin;if(this.state===ActorState.resting){this.y=GameValues_1.GameValues.branchY}else{this.y=GameValues_1.GameValues.seesawLogY}}Actor.prototype.applyStun=function(){this.stunTicks=GameValues_1.GameValues.stunTicks};Actor.prototype.moveX=function(lastKey){var xPosition=this.x+this.xDirection*GameValues_1.GameValues.xSpeed;if(xPosition+this.sprite.width/2>=this.xMax&&lastKey===DataStructures_1.Key.Right||xPosition-this.sprite.width/2<=this.xMin&&lastKey===DataStructures_1.Key.Left){this.xDirection=DataStructures_1.Direction.Stopped;return}if(lastKey===DataStructures_1.Key.Left){this.xDirection=DataStructures_1.Direction.Reverse}else if(lastKey===DataStructures_1.Key.Right){this.xDirection=DataStructures_1.Direction.Forward}if(lastKey!==DataStructures_1.Key.None){var newPosition=this.x+GameValues_1.GameValues.xSpeed*this.xDirection;if(newPosition<this.xMin){this.x=this.xMin}else if(newPosition>this.xMax){this.x=this.xMax}else{this.x+=GameValues_1.GameValues.xSpeed*this.xDirection}}};Actor.prototype.moveY=function(){var yPosition=this.y+this.yDirection*GameValues_1.GameValues.ySpeed;if(yPosition<GameValues_1.GameValues.branchY){this.yDirection=DataStructures_1.Direction.Stopped;this.state=ActorState.resting;return}else if(yPosition>GameValues_1.GameValues.seesawLogY){this.yDirection=DataStructures_1.Direction.Stopped;this.state=ActorState.landing;return}this.y+=GameValues_1.GameValues.ySpeed*this.yDirection};Object.defineProperty(Actor.prototype,"isStunned",{get:function(){return this.stunTicks>0},enumerable:true,configurable:true});Object.defineProperty(Actor.prototype,"collisionModel",{get:function(){var widthDiff=this.sprite.width/2;var heightDiff=this.sprite.height/2;var x1=this.x-(widthDiff+this.collisionBuffer);var y1=this.y-(heightDiff+this.collisionBuffer);var x2=this.x+widthDiff+this.collisionBuffer;var y2=this.y+heightDiff+this.collisionBuffer;return new Collision_1.CollisionModel(x1,y1,x2,y2)},enumerable:true,configurable:true});Actor.prototype.draw=function(context){var px=this.x-this.sprite.width/2;var py=this.y-this.sprite.height/2;if(this.isStunned){this.stunTicks--;context.fillStyle=Colours_1.Colours.STUN_COLOUR;context.globalAlpha=.6;var xTranslation=this.x;var yTranslation=this.y;context.translate(xTranslation,yTranslation);var rotation=this.stunTicks*5%360;context.rotate(DataStructures_1.degToRad(rotation));context.translate(-xTranslation,-yTranslation);context.drawImage(this.sprite,px,py,this.sprite.width,this.sprite.height);context.globalAlpha=1;context.setTransform(1,0,0,1,0,0)}else{context.drawImage(this.sprite,px,py,this.sprite.width,this.sprite.height)}};return Actor}();exports.Actor=Actor},{"./Collision":2,"./Colours":3,"./DataStructures":4,"./GameValues":6}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var CollisionModel=function(){function CollisionModel(x1,y1,x2,y2){this.x1=x1;this.y1=y1;this.x2=x2;this.y2=y2}CollisionModel.prototype.collidesWith=function(model){return this.x1<=model.x2&&this.x2>=model.x1&&this.y1<=model.y2&&this.y2>=model.y1};return CollisionModel}();exports.CollisionModel=CollisionModel},{}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Colours=function(){function Colours(){}Colours.BLACK="#000000";Colours.DARK_GREY="#3A3D3B";Colours.WHITE="#FFFFFF";Colours.THEME="#F9C22E";Colours.COMPLEMENT="#23ACB4";Colours.STUN_COLOUR="#FFFF00";return Colours}();exports.Colours=Colours},{}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Direction;(function(Direction){Direction[Direction["Forward"]=1]="Forward";Direction[Direction["Stopped"]=0]="Stopped";Direction[Direction["Reverse"]=-1]="Reverse"})(Direction=exports.Direction||(exports.Direction={}));var Key;(function(Key){Key[Key["None"]=0]="None";Key[Key["Left"]=1]="Left";Key[Key["Right"]=2]="Right"})(Key=exports.Key||(exports.Key={}));var NumberRange=function(){function NumberRange(min,max){this.min=min;this.max=max}return NumberRange}();exports.NumberRange=NumberRange;var KeyValuePair=function(){function KeyValuePair(key,value){this.key=key;this.value=value}return KeyValuePair}();exports.KeyValuePair=KeyValuePair;function degToRad(degrees){return degrees*Math.PI/180}exports.degToRad=degToRad;function randomNumBetween(lower,upper){return Math.floor(Math.random()*(upper-lower+1)+lower)}exports.randomNumBetween=randomNumBetween},{}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ElementManager=function(){function ElementManager(){}ElementManager.getElement=function(resourceId){var element=document.getElementById(resourceId);return element};return ElementManager}();exports.ElementManager=ElementManager},{}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var GameValues=function(){function GameValues(){}Object.defineProperty(GameValues,"fruitYTop",{get:function(){return 140},enumerable:true,configurable:true});Object.defineProperty(GameValues,"fruitYBot",{get:function(){return this.scHeight-100},enumerable:true,configurable:true});Object.defineProperty(GameValues,"centerX",{get:function(){return this.scWidth/2},enumerable:true,configurable:true});Object.defineProperty(GameValues,"centerY",{get:function(){return this.scHeight/2},enumerable:true,configurable:true});GameValues.Initialise=function(canvas){this.scWidth=canvas.width;this.scHeight=canvas.height};GameValues.fps=16;GameValues.scWidth=0;GameValues.scHeight=0;GameValues.branchY=70;GameValues.seesawLogY=540;GameValues.padEdge=2;GameValues.padCentre=75;GameValues.xSpeed=4*(16/10);GameValues.minYSpeed=1.5*(16/10);GameValues.launchYSpeed=8.5*(16/10);GameValues.maxYSpeed=15.5*(16/10);GameValues.ySpeed=5*(16/10);GameValues.yDeceleration=.07*(16/10);GameValues.yAcceleration=.2*(16/10);GameValues.itemMinSpeed=8;GameValues.itemMaxSpeed=14;GameValues.stunTicks=240;GameValues.gameTimeLength=40;GameValues.bigTimeBonus=10;GameValues.timeTick=.5;GameValues.word1="HELLO";GameValues.word2="WORLD";return GameValues}();exports.GameValues=GameValues},{}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Collision_1=require("./Collision");var Colours_1=require("./Colours");var DataStructures_1=require("./DataStructures");var ElementManager_1=require("./ElementManager");var ItemAttributes_1=require("./ItemAttributes");var Resources_1=require("./Resources");var GameValues_1=require("./GameValues");var Item=function(){function Item(direction,x,y,attributes){this.letter="";this.splatTicks=45;this.image=ElementManager_1.ElementManager.getElement(Resources_1.Resources.NULL_IMAGE);this.flippedImage=null;this.direction=direction;this.x=x;this.y=y;this.speed=DataStructures_1.randomNumBetween(GameValues_1.GameValues.itemMinSpeed,GameValues_1.GameValues.itemMaxSpeed)/2;this.active=true;this.delete=false;this.collisionBuffer=5;this.itemAttributes=attributes;this.image=ElementManager_1.ElementManager.getElement(this.attributes.iconPath);if(this.attributes.iconPathFlipped!=""){this.flippedImage=ElementManager_1.ElementManager.getElement(this.attributes.iconPathFlipped)}this.splat=ElementManager_1.ElementManager.getElement(Resources_1.Resources.splat)}Object.defineProperty(Item.prototype,"collisionModel",{get:function(){var widthDiff=this.image.width/2;var heightDiff=this.image.height/2;var x1=this.x-(widthDiff+this.collisionBuffer);var y1=this.y-(heightDiff+this.collisionBuffer);var x2=this.x+widthDiff+this.collisionBuffer;var y2=this.y+heightDiff+this.collisionBuffer;return new Collision_1.CollisionModel(x1,y1,x2,y2)},enumerable:true,configurable:true});Object.defineProperty(Item.prototype,"attributes",{get:function(){return this.itemAttributes},enumerable:true,configurable:true});Item.createFruit=function(direction,x,y){var attributes=ItemAttributes_1.ItemAttributes.createFruitAttributes();var item=new Item(direction,x,y,attributes);return item};Item.createLetter=function(letter,direction,x,y){var attributes=ItemAttributes_1.ItemAttributes.createLetterAttributes();var item=new Item(direction,x,y,attributes);item.setLetter(letter);return item};Item.prototype.moveX=function(){this.x+=this.speed*this.direction};Item.prototype.setLetter=function(letter){this.letter=letter};Item.prototype.checkCanvasWidthBounds=function(width){if(this.x+this.image.width<0||this.x-this.image.width>width){this.active=false;this.delete=true}return this.delete};Item.prototype.draw=function(context){if(this.delete){return}var widthDiff=this.image.width/2;var heightDiff=this.image.height/2;var x1=this.x-widthDiff;var y1=this.y-heightDiff;var x2=this.x+widthDiff;var y2=this.y+heightDiff;if(!this.active){if(this.splatTicks>0){context.globalAlpha=this.splatTicks/45;context.drawImage(this.splat,x1,y1,x2-x1,y2-y1);context.globalAlpha=1;this.splatTicks--}else{this.delete=true}}else if(this.attributes.isLetter){context.font="50px"+Resources_1.Resources.FONT;context.fillStyle=Colours_1.Colours.THEME;context.fillText(this.letter,this.x,this.y)}else{if(this.direction==DataStructures_1.Direction.Reverse&&this.flippedImage!=null){context.drawImage(this.flippedImage,x1,y1,x2-x1,y2-y1)}else{context.drawImage(this.image,x1,y1,x2-x1,y2-y1)}}};return Item}();exports.Item=Item},{"./Collision":2,"./Colours":3,"./DataStructures":4,"./ElementManager":5,"./GameValues":6,"./ItemAttributes":8,"./Resources":9}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DataStructures_1=require("./DataStructures");var Resources_1=require("./Resources");var ItemAttributes=function(){function ItemAttributes(points,isHazard,iconPath,name,rarity,isLetter,flippedImage){if(isLetter===void 0){isLetter=false}if(flippedImage===void 0){flippedImage=""}this.points=points;this.isHazard=isHazard;this.iconPath=iconPath;this.name=name;this.rarity=rarity;this.isLetter=isLetter;this.iconPathFlipped=flippedImage}ItemAttributes.createFruitAttributes=function(){var randNum=DataStructures_1.randomNumBetween(0,90);for(var _i=0,_a=this.items;_i<_a.length;_i++){var item=_a[_i];if(randNum>=item.rarity){return item}}return this.items[0]};ItemAttributes.createLetterAttributes=function(){return new ItemAttributes(2,false,Resources_1.Resources.NULL_IMAGE,"Letter",0,true)};ItemAttributes.items=[new ItemAttributes(1,false,Resources_1.Resources.fruitA,"Watermelon",40),new ItemAttributes(0,true,Resources_1.Resources.hazard,"Hazard",22,false,Resources_1.Resources.hazardFlipped),new ItemAttributes(2,false,Resources_1.Resources.fruitB,"Honeydew Melon",13),new ItemAttributes(4,false,Resources_1.Resources.fruitC,"Rock Melon",5),new ItemAttributes(8,false,Resources_1.Resources.fruitD,"Crystal Melon",1)];return ItemAttributes}();exports.ItemAttributes=ItemAttributes},{"./DataStructures":4,"./Resources":9}],9:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Resources=function(){function Resources(){}Resources.FONT="Coiny ";Resources.seesawLog="seesaw-log";Resources.seesawRock="seesaw-rock";Resources.fruitA="fruit1";Resources.fruitB="fruit2";Resources.fruitC="fruit3";Resources.fruitD="fruit4";Resources.hazard="hazard";Resources.hazardFlipped="hazard-f";Resources.splat="splat";Resources.slothA="sloth-1";Resources.slothB="sloth-2";Resources.NULL_IMAGE="null-image";Resources.soundWasps="wasps-sound";Resources.soundSplat="splat-sound";Resources.soundGameover="gameover-sound";Resources.soundSeesaw="seesaw-sound";Resources.soundBonus="bonus-sound";Resources.music="bgm-sound";Resources.uiTitle="title";Resources.uiContainer="ui";Resources.uiScoreText="score-text";Resources.uiScorePanel="score-panel";Resources.uiPlayButton="play-button";Resources.uiSubmitButton="submit-button";return Resources}();exports.Resources=Resources},{}],10:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var ElementManager_1=require("./ElementManager");var Resources_1=require("./Resources");var SoundManager=function(){function SoundManager(){}SoundManager.initialise=function(){this.wasps=ElementManager_1.ElementManager.getElement(Resources_1.Resources.soundWasps);this.splat=ElementManager_1.ElementManager.getElement(Resources_1.Resources.soundSplat);this.gameOver=ElementManager_1.ElementManager.getElement(Resources_1.Resources.soundGameover);this.seesaw=ElementManager_1.ElementManager.getElement(Resources_1.Resources.soundSeesaw);this.bonus=ElementManager_1.ElementManager.getElement(Resources_1.Resources.soundBonus);this.music=ElementManager_1.ElementManager.getElement(Resources_1.Resources.music);this.music.volume=.3};SoundManager.prototype.play=function(sound){sound.pause();sound.currentTime=0;sound.play()};return SoundManager}();exports.SoundManager=SoundManager},{"./ElementManager":5,"./Resources":9}],11:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var DataStructures_1=require("./DataStructures");var WordSet=function(){function WordSet(word){this.wordArray=[];for(var _i=0,word_1=word;_i<word_1.length;_i++){var char=word_1[_i];this.wordArray.push(new DataStructures_1.KeyValuePair(char,false))}this.fullWord=word}Object.defineProperty(WordSet.prototype,"isWordComplete",{get:function(){var complete=true;for(var _i=0,_a=this.wordArray;_i<_a.length;_i++){var kvPair=_a[_i];if(!kvPair.value){complete=false;return complete}}return complete},enumerable:true,configurable:true});Object.defineProperty(WordSet.prototype,"word",{get:function(){return this.fullWord},enumerable:true,configurable:true});WordSet.prototype.activateLetter=function(letter){for(var _i=0,_a=this.wordArray;_i<_a.length;_i++){var kvPair=_a[_i];if(kvPair.key.toLowerCase()===letter.toLowerCase()&&!kvPair.value){kvPair.value=true;break}}};WordSet.prototype.getUnactivatedLetter=function(){var availableLetters=this.wordArray.filter(function(kvpair){return!kvpair.value});if(availableLetters.length<1){return" "}var randomIndex=DataStructures_1.randomNumBetween(0,availableLetters.length-1);return availableLetters[randomIndex].key};return WordSet}();exports.WordSet=WordSet},{"./DataStructures":4}],12:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Actor_1=require("./Actor");var Colours_1=require("./Colours");var DataStructures_1=require("./DataStructures");var ElementManager_1=require("./ElementManager");var GameValues_1=require("./GameValues");var Item_1=require("./Item");var Resources_1=require("./Resources");var SoundManager_1=require("./SoundManager");var WordSet_1=require("./WordSet");var Game=function(){function Game(){this.lastKey=DataStructures_1.Key.None;this.leftKeyDown=false;this.rightKeyDown=false;this.gameStarted=false;this.score=0;this.targetWord=new WordSet_1.WordSet(GameValues_1.GameValues.word1);this.items=[];this.sprites={};this.timeOffset=0;this.drawTimer=0;this.squareTimer=0;this.gameTimer=0;this.soundManager=new SoundManager_1.SoundManager;this.activeActorNum=0;this.actors=[];this.gameTime=GameValues_1.GameValues.gameTimeLength;document.onkeydown=this.keyDown.bind(this);document.onkeyup=this.keyReleased.bind(this)}Game.prototype.initialise=function(canvasId){this.stopTimers();this.actors=[];this.items=[];this.canvas=ElementManager_1.ElementManager.getElement(canvasId);this.context=this.canvas.getContext("2d");this.loadSprites();GameValues_1.GameValues.Initialise(this.canvas);var boundsLeft=new DataStructures_1.NumberRange(GameValues_1.GameValues.padEdge,GameValues_1.GameValues.scWidth/2-GameValues_1.GameValues.padCentre);var boundsRight=new DataStructures_1.NumberRange(GameValues_1.GameValues.scWidth/2+GameValues_1.GameValues.padCentre,GameValues_1.GameValues.scWidth-GameValues_1.GameValues.padEdge);var leftActor=new Actor_1.Actor(Actor_1.ActorState.resting,boundsLeft,this.sprites[Resources_1.Resources.slothA]);var rightActor=new Actor_1.Actor(Actor_1.ActorState.waiting,boundsRight,this.sprites[Resources_1.Resources.slothB]);this.actors=[leftActor,rightActor];this.activeActorNum=0;this.targetWord=new WordSet_1.WordSet("HELLO");this.gameTime=GameValues_1.GameValues.gameTimeLength;this.score=0;this.lastKey=DataStructures_1.Key.None;this.gameStarted=true;SoundManager_1.SoundManager.initialise();this.soundManager=new SoundManager_1.SoundManager;this.soundManager.play(SoundManager_1.SoundManager.music);this.startTimers()};Game.prototype.startTimers=function(){this.drawTimer=setInterval(this.draw.bind(this),GameValues_1.GameValues.fps);this.squareTimer=setInterval(this.spawnNewItem.bind(this),500);this.gameTimer=setInterval(this.tickGameTimer.bind(this),500)};Game.prototype.getActiveActor=function(){return this.actors[this.activeActorNum]};Game.prototype.stopTimers=function(){window.clearInterval(this.drawTimer);window.clearInterval(this.squareTimer);window.clearInterval(this.gameTimer)};Game.prototype.draw=function(){var _this=this;this.context.clearRect(0,0,GameValues_1.GameValues.scWidth,GameValues_1.GameValues.scHeight);this.drawTime();this.drawScore();this.drawWords();this.getActiveActor().moveX(this.lastKey);this.getActiveActor().moveY();this.items.forEach(function(sq){if(!sq.delete){sq.checkCanvasWidthBounds(GameValues_1.GameValues.scWidth);if(sq.active&&!_this.getActiveActor().isStunned&&_this.getActiveActor().collisionModel.collidesWith(sq.collisionModel)){_this.soundManager.play(SoundManager_1.SoundManager.splat);sq.active=false;_this.addScore(sq.attributes.points);if(sq.attributes.isLetter){_this.targetWord.activateLetter(sq.letter);if(_this.targetWord.isWordComplete){_this.soundManager.play(SoundManager_1.SoundManager.bonus);_this.setNewWord()}}else if(sq.attributes.isHazard){_this.soundManager.play(SoundManager_1.SoundManager.wasps);_this.getActiveActor().applyStun()}}sq.moveX();sq.draw(_this.context)}});this.drawSeesawRock();this.drawSeesawLog();this.drawActors();if(this.getActiveActor().state===Actor_1.ActorState.landing){this.soundManager.play(SoundManager_1.SoundManager.seesaw);this.switchActor();this.getActiveActor().state=Actor_1.ActorState.ascending;GameValues_1.GameValues.ySpeed=GameValues_1.GameValues.launchYSpeed;this.getActiveActor().yDirection=DataStructures_1.Direction.Reverse}if(this.getActiveActor().state===Actor_1.ActorState.ascending&&GameValues_1.GameValues.ySpeed>GameValues_1.GameValues.minYSpeed){GameValues_1.GameValues.ySpeed-=GameValues_1.GameValues.yDeceleration}else if(this.getActiveActor().state===Actor_1.ActorState.descending&&GameValues_1.GameValues.ySpeed<GameValues_1.GameValues.maxYSpeed){GameValues_1.GameValues.ySpeed+=GameValues_1.GameValues.yAcceleration}};Game.prototype.tickGameTimer=function(){if(this.gameTime<0){this.endGame()}this.gameTime-=GameValues_1.GameValues.timeTick};Game.prototype.setNewWord=function(){this.gameTime+=GameValues_1.GameValues.bigTimeBonus;if(this.targetWord.word===GameValues_1.GameValues.word1){this.targetWord=new WordSet_1.WordSet(GameValues_1.GameValues.word2)}else{this.targetWord=new WordSet_1.WordSet(GameValues_1.GameValues.word1)}};Game.prototype.endGame=function(){this.soundManager.play(SoundManager_1.SoundManager.gameOver);this.stopTimers();var flex="display: flex";var gameOverMessage="Game over!";ElementManager_1.ElementManager.getElement(Resources_1.Resources.uiContainer).setAttribute("style",flex);ElementManager_1.ElementManager.getElement(Resources_1.Resources.uiScorePanel).setAttribute("style",flex);ElementManager_1.ElementManager.getElement(Resources_1.Resources.uiScoreText).textContent=this.score.toString();ElementManager_1.ElementManager.getElement(Resources_1.Resources.uiTitle).textContent=gameOverMessage;ElementManager_1.ElementManager.getElement(Resources_1.Resources.uiPlayButton).textContent="REPLAY";ElementManager_1.ElementManager.getElement(Resources_1.Resources.uiSubmitButton).setAttribute("score",this.score.toString())};Game.prototype.addScore=function(newPoints){this.score+=newPoints};Game.prototype.spawnNewItem=function(){if(this.timeOffset>0){this.timeOffset--;return}var direction=DataStructures_1.randomNumBetween(0,1);var xOrigin=0;if(direction===DataStructures_1.Direction.Stopped){direction=DataStructures_1.Direction.Reverse;xOrigin=GameValues_1.GameValues.scWidth+50}else{direction=DataStructures_1.Direction.Forward;xOrigin=-50}var yPosition=DataStructures_1.randomNumBetween(GameValues_1.GameValues.fruitYTop,GameValues_1.GameValues.fruitYBot);if(DataStructures_1.randomNumBetween(0,5)===1){var letter=this.targetWord.getUnactivatedLetter();this.items.push(Item_1.Item.createLetter(letter,direction,xOrigin,yPosition))}else{this.items.push(Item_1.Item.createFruit(direction,xOrigin,yPosition))}this.items=this.items.filter(function(item){return!item.delete});this.timeOffset=DataStructures_1.randomNumBetween(0,2)};Game.prototype.switchActor=function(){this.getActiveActor().xDirection=DataStructures_1.Direction.Stopped;if(this.activeActorNum===0){this.activeActorNum=1}else{this.activeActorNum=0}};Game.prototype.drawActors=function(){var _this=this;this.actors.forEach(function(actor){actor.draw(_this.context)})};Game.prototype.drawTime=function(){this.context.font="20px Coiny";this.context.fillStyle=Colours_1.Colours.DARK_GREY;var maxWidth=100;this.context.fillRect(200,60,maxWidth+8,16);this.context.fillStyle=Colours_1.Colours.THEME;var drawableTime=this.gameTime;if(this.gameTime<0){drawableTime=0}var timePercentage=drawableTime/GameValues_1.GameValues.gameTimeLength;this.context.fillRect(204,64,maxWidth*timePercentage,8)};Game.prototype.drawScore=function(){this.context.font="64px Coiny";this.context.fillStyle=Colours_1.Colours.DARK_GREY;this.context.fillStyle=Colours_1.Colours.THEME;var position=232;if(this.score>99){position-=32}else if(this.score>9){position-=16}this.context.fillText(this.score,position,48)};Game.prototype.drawWords=function(){var text="";this.targetWord.wordArray.forEach(function(kv){if(kv.value){text+=kv.key.toUpperCase()}else{text+="_"}});this.context.font="40px Coiny";this.context.fillStyle=Colours_1.Colours.DARK_GREY;this.context.fillStyle=Colours_1.Colours.THEME;this.context.fillText(text,188,112)};Game.prototype.drawSeesawRock=function(){var rockX=GameValues_1.GameValues.scWidth/2-this.sprites[Resources_1.Resources.seesawRock].width/2;var rockY=GameValues_1.GameValues.scHeight-this.sprites[Resources_1.Resources.seesawRock].height+3;this.drawSpriteXY(Resources_1.Resources.seesawRock,rockX,rockY)};Game.prototype.drawSeesawLog=function(){var xTranslation=GameValues_1.GameValues.centerX;var yTranslation=GameValues_1.GameValues.seesawLogY;this.context.translate(xTranslation,yTranslation);if(this.activeActorNum===0){this.context.rotate(DataStructures_1.degToRad(10))}else{this.context.rotate(DataStructures_1.degToRad(360-10))}this.context.translate(-xTranslation,-yTranslation);this.drawSpriteXY("seesaw-log",GameValues_1.GameValues.centerX,540,true);this.context.setTransform(1,0,0,1,0,0)};Game.prototype.drawSpriteXY=function(imageName,x,y,centerX){if(centerX===void 0){centerX=false}var width=this.sprites[imageName].width;var height=this.sprites[imageName].height;var px=x;if(centerX){px=x-width/2}this.context.drawImage(this.sprites[imageName],px,y,width,height)};Game.prototype.loadSprites=function(){this.sprites[Resources_1.Resources.seesawLog]=ElementManager_1.ElementManager.getElement(Resources_1.Resources.seesawLog);this.sprites[Resources_1.Resources.seesawRock]=ElementManager_1.ElementManager.getElement(Resources_1.Resources.seesawRock);this.sprites[Resources_1.Resources.slothA]=ElementManager_1.ElementManager.getElement(Resources_1.Resources.slothA);this.sprites[Resources_1.Resources.slothB]=ElementManager_1.ElementManager.getElement(Resources_1.Resources.slothB)};Game.prototype.keyDown=function(e){e=e||window.event;if(this.getActiveActor()===undefined){return}if(e.keyCode===32&&this.getActiveActor().state===Actor_1.ActorState.resting){e.preventDefault();this.getActiveActor().state=Actor_1.ActorState.descending;this.getActiveActor().yDirection=DataStructures_1.Direction.Forward;GameValues_1.GameValues.ySpeed=GameValues_1.GameValues.minYSpeed}if(!this.gameStarted){return}if(e.keyCode===37){this.getActiveActor().xDirection=DataStructures_1.Direction.Reverse;this.leftKeyDown=true;this.lastKey=DataStructures_1.Key.Left}else if(e.keyCode===39){this.getActiveActor().xDirection=DataStructures_1.Direction.Forward;this.rightKeyDown=true;this.lastKey=DataStructures_1.Key.Right}};Game.prototype.keyReleased=function(e){if(!this.gameStarted){return}if(e.keyCode===37){this.leftKeyDown=false;if(this.rightKeyDown===true){this.getActiveActor().xDirection=DataStructures_1.Direction.Forward;this.lastKey=DataStructures_1.Key.Right}else{this.getActiveActor().xDirection=DataStructures_1.Direction.Stopped;this.lastKey=DataStructures_1.Key.None}}else if(e.keyCode===39){this.rightKeyDown=false;if(this.leftKeyDown===true){this.getActiveActor().xDirection=DataStructures_1.Direction.Reverse;this.lastKey=DataStructures_1.Key.Left}else{this.getActiveActor().xDirection=DataStructures_1.Direction.Stopped;this.lastKey=DataStructures_1.Key.None}}};return Game}();exports.Game=Game;window.game=new Game},{"./Actor":1,"./Colours":3,"./DataStructures":4,"./ElementManager":5,"./GameValues":6,"./Item":7,"./Resources":9,"./SoundManager":10,"./WordSet":11}]},{},[12]);